<!-- ... (head and body start remain the same) ... -->
<body>
    <div class="app-container">
        <div class="sidebar">
            <!-- ... (sidebar content remains the same) ... -->
             <div class="menu">
                <!-- ... (other menu items) ... -->
                <button class="menu-item" data-view="chat"> <!-- Still targets chat area -->
                     <svg viewBox="0 0 24 24" width="24" height="24">
                        <path fill="currentColor" d="M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M20,16H6L4,18V4H20V16Z"/>
                    </svg>
                    Chat
                </button>
                <button class="menu-item" data-view="preview-toggle" id="preview-toggle-button"> <!-- Changed data-view, added ID -->
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <!-- Using a layout icon instead of eye -->
                        <path fill="currentColor" d="M3,3H11V11H3V3M13,3H21V11H13V3M3,13H11V21H3V13M18,13H16V16H13V18H16V21H18V18H21V16H18V13Z"/>
                    </svg>
                    Toggle Preview <!-- Text Changed -->
                </button>
                <button class="menu-item" data-view="export">
                    <!-- ... (export icon/text) ... -->
                </button>
                <button class="menu-item" data-view="projects">
                    <!-- ... (projects icon/text) ... -->
                </button>
            </div>
            <!-- ... (theme switch and model selector remain the same) ... -->
        </div>
        
        <!-- START: Modified main-content Structure -->
        <div class="main-content">
            <div class="main-area-wrapper"> <!-- New wrapper -->
                <div class="left-pane" id="left-pane"> <!-- Was main-content before restructuring -->
                    
                    <!-- Chat view elements moved here -->
                    <div class="view-container active" id="chat-view"> 
                        <div class="messages" id="messages">
                             <div class="message system">
                                <div class="message-content">
                                    <p>Hello! I'm GenWeb AI. I can help you create websites, web apps, games, and more just from text prompts. Try asking me to create something for you!</p>
                                </div>
                            </div>
                        </div>
                         <div class="input-area">
                           <!-- ... (input area content remains the same) ... -->
                             <div class="file-upload">
                                <label for="image-upload" title="Upload an image">
                                    <svg viewBox="0 0 24 24" width="24" height="24">
                                        <path fill="currentColor" d="M4,4H7L9,2H15L17,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,14C10.8,14 9.6,14.2 8.5,14.5C8.8,13.7 9.4,13 10.1,12.5C10.7,12 11.3,11.7 12,11.7C12.7,11.7 13.3,12 13.9,12.5C14.6,13 15.2,13.7 15.5,14.5C14.4,14.2 13.2,14 12,14Z"/>
                                    </svg>
                                </label>
                                <input type="file" id="image-upload" accept="image/*" style="display: none">
                            </div>
                            <div class="file-upload">
                                <label for="asset-upload" title="Upload project asset">
                                    <svg viewBox="0 0 24 24" width="24" height="24">
                                        <path fill="currentColor" d="M14,2L20,8V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V4A2,2 0 0,1 6,2H14M18,20V9H13V4H6V20H18M16,11H8V13H16V11M10,14H8V19H10V14M12,14V19H14V14H12Z"/>
                                    </svg>
                                </label>
                                <input type="file" id="asset-upload" accept=".png,.jpg,.jpeg,.gif,.svg,.mp3,.wav,.ogg,.json,.ttf,.otf" style="display: none">
                            </div>
                            <textarea id="user-input" placeholder="Type your message here or paste an image..." rows="1"></textarea>
                            <button id="send-button">
                                <svg viewBox="0 0 24 24" width="24" height="24">
                                    <path fill="currentColor" d="M2,21L23,12L2,3V10L17,12L2,14V21Z"/>
                                </svg>
                            </button>
                         </div>
                    </div>
                    
                     <!-- Export view moved here -->
                    <div class="view-container" id="export-view">
                        <!-- ... (export-header and file-list content remains the same) ... -->
                         <div class="export-header">
                             <h2>Export Files</h2>
                             <div class="download-buttons">
                                <button id="download-all">
                                    <svg viewBox="0 0 24 24" width="20" height="20">
                                        <path fill="currentColor" d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"/>
                                    </svg>
                                    Download All Files
                                </button>
                                <button id="download-single" class="single-file-download">
                                    <svg viewBox="0 0 24 24" width="20" height="20">
                                        <path fill="currentColor" d="M5,3H19A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V5A2,2 0 0,1 5,3M5,5V19H19V5H5M11,7H13V13H17V15H7V13H11V7Z"/>
                                    </svg>
                                    Download as Single HTML
                                </button>
                            </div>
                         </div>
                         <div class="file-list" id="file-list">
                            <!-- Files will be populated here -->
                         </div>
                    </div>
                    
                    <!-- Projects view moved here -->
                    <div class="view-container" id="projects-view">
                         <!-- ... (projects-header, project-name, projects-list content remains the same) ... -->
                        <div class="projects-header">
                            <h2>My Projects</h2>
                            <div class="project-controls">
                                <button id="save-project" class="project-button">
                                    <svg viewBox="0 0 24 24" width="20" height="20">
                                        <path fill="currentColor" d="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z"/>
                                    </svg>
                                    Save Current Project
                                </button>
                                <button id="new-project" class="project-button">
                                    <svg viewBox="0 0 24 24" width="20" height="20">
                                        <path fill="currentColor" d="M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/>
                                    </svg>
                                    New Project
                                </button>
                            </div>
                        </div>
                        <div class="project-name-container">
                            <input type="text" id="project-name" placeholder="Untitled Project" />
                        </div>
                        <div class="projects-list" id="projects-list">
                            <!-- Projects will be populated here -->
                        </div>
                    </div>

                </div> <!-- End left-pane -->

                <div class="resizer" id="resizer"></div> <!-- Resizer Handle -->

                <div class="right-pane" id="right-pane"> <!-- New pane for preview -->
                    <!-- Preview view elements moved here -->
                    <div class="view-container active" id="preview-view"> <!-- Always active structure, visibility toggled by parent -->
                         <div class="preview-header">
                             <h2>Live Preview</h2>
                             <div class="preview-controls">
                                <button id="refresh-preview">
                                    <svg viewBox="0 0 24 24" width="20" height="20">
                                        <path fill="currentColor" d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
                                    </svg>
                                    Refresh
                                </button>
                                <a id="open-new-tab" href="#" target="_blank" class="preview-button">
                                    <svg viewBox="0 0 24 24" width="20" height="20">
                                        <path fill="currentColor" d="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19M16,11H8V13H16V11M10,14H8V19H10V14M12,14V19H14V14H12Z"/>
                                    </svg>
                                    Open in new tab
                                </a>
                                <!-- Add a close/hide button? Or rely on sidebar toggle -->
                            </div>
                         </div>
                         <div class="preview-frame-container">
                            <iframe id="preview-frame" sandbox="allow-scripts allow-same-origin"></iframe>
                         </div>
                    </div>
                </div> <!-- End right-pane -->
            </div> <!-- End main-area-wrapper -->
        </div> <!-- End main-content -->
        <!-- END: Modified main-content Structure -->
    </div>
    
    <script type="module" src="config.js"></script>
    <script type="module" src="app.js"></script>
</body>
</html>